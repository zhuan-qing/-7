## 实验七 指针实验报告
## 一、实验目的
本实验旨在达成以下目标：
- 深度理解并熟练掌握指针、地址、指针类型、void 指针及空指针等关键概念，明晰其在内存操作与数据访问中的核心作用。
- 精准掌握指针变量的定义、初始化方法，灵活运用指针的间接访问机制、加减运算及各类指针表达式，实现高效数据处理。
- 熟练运用数组的指针及指向数组的指针变量，优化数组操作逻辑，提升程序执行效率。
- 熟练操作字符串的指针及指向字符串的指针变量，实现字符串的高效处理与存储管理。

## 二、实验准备
- 系统梳理变量、变量地址及指针变量的概念，通过实例对比与分析，清晰界定三者差异，为后续指针操作奠定理论基础。
- 全面复习指针与数组结合应用的知识要点，包括数组元素的指针访问方式、指针遍历数组的算法逻辑等，强化数组指针运用能力。
- 深入回顾指针的其他理论知识，如指针的算术运算规则、指针与函数参数传递的关系等，构建完整的指针知识体系。

## 三、实验内容
### （一）程序阅读分析
- **程序代码**
```c
#include <stdio.h>
void main() {
    int i, *p;
    p = &i;
    *p = 5;
    printf("%d\n", i);
    printf("%d\n", *p);
    printf("%d\n", p);
    printf("%d\n", &i);
}
```
- **分析过程**
    - 首先，程序定义了整型变量`i`和指针变量`p`。`p = &i;`语句将指针`p`指向变量`i`的地址，这是指针操作的基础步骤，建立了指针与变量之间的关联。
    - 接着，`*p = 5;`通过指针`p`间接访问并修改了`i`的值为 5。此时，`i`和`*p`在逻辑上代表同一个存储单元的值。
    - 对于`printf("%d\n", i);`和`printf("%d\n", *p);`，理论上应输出相同的值 5，因为它们都指向或代表变量`i`的值。而`printf("%d\n", p);`将输出变量`i`的地址，`printf("%d\n", &i);`同样输出`i`的地址，这两个地址值应相同。
    - 但根据题目提示，可能存在一些潜在问题。在某些不规范的编程环境或代码编写习惯下，可能出现返回类型不匹配的情况，例如若将指针变量错误地当作整型变量进行返回操作；格式说明符不匹配可能源于对`%d`的错误使用，如在输出指针地址时应使用`%p`；指针解引用混淆可能表现为对`*p`操作的误解，导致数据访问错误；变量与地址混淆则可能使程序逻辑混乱，如错误地将变量值当作地址进行操作。
- **运行结果**
在[具体的编程环境，如 Visual Studio Code、Dev-C++等]中运行该程序，输出结果如下：
```
5
5
[十六进制内存地址，如 0x7ffee5a2c73c]
[十六进制内存地址，如 0x7ffee5a2c73c]
```
从实际运行结果来看，在当前环境下程序运行正常，未出现上述潜在问题，验证了程序逻辑在基本语法层面的正确性。但这也提醒在不同编程环境或复杂程序结构中，需严格遵循指针操作规范，防止潜在错误发生。

### （二）整数排序实现
- **算法设计思路**
采用冒泡排序算法，其基本思想是多次比较相邻元素并交换位置，将最大（或最小）元素逐步“冒泡”到数组末尾。利用指针操作数组元素，通过指针的移动和比较实现排序过程。
- **代码实现**
```c
#include <stdio.h>
#include <stdlib.h>

// 交换两个整数的函数，通过指针操作
void swap(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

// 冒泡排序函数，使用指针遍历数组
void sort(int *arr, int n) {
    for (int i = 0; i < n - 1; i++) {
        for (int j = 0; j < n - i - 1; j++) {
            if (*(arr + j) > *(arr + j + 1)) {
                swap(arr + j, arr + j + 1);
            }
        }
    }
}

int main() {
    int n;
    printf("请输入整数的个数：");
    scanf("%d", &n);

    // 动态分配内存存储整数数组
    int *arr = (int *)malloc(n * sizeof(int));
    if (arr == NULL) {
        printf("内存分配失败！\n");
        return 1;
    }

    printf("请输入 %d 个整数：\n", n);
    for (int i = 0; i < n; i++) {
        scanf("%d", arr + i);
    }

    // 调用排序函数
    sort(arr, n);

    printf("排序后的结果为：\n");
    for (int i = 0; i < n; i++) {
        printf("%d ", *(arr + i));
    }
    printf("\n");

    // 释放内存
    free(arr);

    return 0;
}
```
- **测试结果与分析**
输入一组整数，如`5 3 4 1 2`，运行程序后，输出结果为`1 2 3 4 5`，表明排序函数正确实现了整数排序功能。在排序过程中，`sort`函数通过指针`arr`遍历数组，`*(arr + j)`和`*(arr + j + 1)`准确地访问和比较相邻元素，`swap`函数利用指针高效地交换元素值，实现了排序逻辑。动态内存分配与释放确保了程序在处理不同规模数组时的灵活性与内存安全性。

## 四、实验总结
通过本次实验，在指针知识与技能的掌握上取得了显著进步。
- 在概念理解方面，对指针、地址等核心概念的认知更加清晰，能准确区分变量、变量地址与指针变量的本质差异，深刻领会指针在内存操作中的独特地位，为后续复杂数据结构与算法学习奠定坚实基础。
- 编程实践中，熟练掌握了指针变量的定义、初始化及多种运算操作，能够灵活运用指针实现数组和字符串的高效处理。在排序算法中，通过指针优化数组元素访问与交换，提升程序性能；在内存管理部分，成功实现动态内存分配与释放，确保程序内存使用的合理性与安全性。
- 实验过程也遇到一些挑战，如在处理指针边界情况和内存分配错误处理时需更加谨慎。在未来学习中，将进一步深化指针应用，探索其在更复杂编程场景下的运用技巧，持续提升编程能力与问题解决能力，不断拓展编程知识边界。 
